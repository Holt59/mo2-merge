CMAKE_MINIMUM_REQUIRED (VERSION 2.8)

CMAKE_POLICY(SET CMP0020 NEW)
CMAKE_POLICY(SET CMP0043 NEW)

SET(PROJ_AUTHOR Tannin)
SET(PROJ_ARCH x86)
if(CMAKE_SIZEOF_VOID_P EQUAL 8)
  SET(PROJ_ARCH x64)
endif()


SET(lootcli_SRCS
	lootthread.cpp
	main.cpp
  )

SET(lootcli_HDRS
	lootthread.h
  )

# Qt5
SET(CMAKE_INCLUDE_CURRENT_DIR ON)
SET(CMAKE_AUTOMOC ON)
FIND_PACKAGE(Qt5Core REQUIRED)

MESSAGE(STATUS ${Qt5Core_DIR}/../../../include)

INCLUDE_DIRECTORIES(${Qt5Core_DIR}/../../../include)
INCLUDE_DIRECTORIES(${Qt5Core_DIR}/../../../include/QtCore)

# Boost
SET(Boost_USE_STATIC_LIBS        ON)
SET(Boost_USE_MULTITHREADED      ON)
SET(Boost_USE_STATIC_RUNTIME    OFF)
FIND_PACKAGE(Boost REQUIRED)

INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../lootapi/include)

LINK_DIRECTORIES(${Boost_LIBRARY_DIRS})

MESSAGE(STATUS ${Boost_LIBRARY_DIRS})

ADD_EXECUTABLE(lootcli ${lootcli_HDRS} ${lootcli_SRCS})
TARGET_LINK_LIBRARIES(lootcli ${Boost_LIBRARIES} Qt5::Core)
SET_TARGET_PROPERTIES(lootcli PROPERTIES COMPILE_FLAGS /GL)
SET_TARGET_PROPERTIES(lootcli PROPERTIES LINK_FLAGS_RELWITHDEBINFO "/LTCG /INCREMENTAL:NO /LARGEADDRESSAWARE /OPT:REF /OPT:ICF")

###############
## Installation

INSTALL(TARGETS lootcli
        RUNTIME DESTINATION bin)
INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/lootcli.pdb DESTINATION pdb)
